<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="BV9ARM.css">
<TITLE> Section 6.	Security Considerations</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">
<OL>
<H1 CLASS="1Level">
<A NAME="pgfId=997350">
 </A>
Section 6.	Security Considerations</H1>
</OL>
<DIV>
<OL>
<H3 CLASS="2Level">
<A NAME="pgfId=997352">
 </A>
6.1	<A NAME="32222">
 </A>
Access Control Lists</H3>
</OL>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997353">
 </A>
Access Control Lists (ACLs), are address match lists that you can set up and nickname for future use in <CODE CLASS="Program-Process">
allow-query</CODE>
, <CODE CLASS="Program-Process">
allow-recursion</CODE>
, <CODE CLASS="Program-Process">
blackhole allow-transfer</CODE>
, etc.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997354">
 </A>
Using ACLs allows you to have finer control over who can access your nameserver, without cluttering up your config files with huge lists of IP addresses.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997355">
 </A>
It is a <EM CLASS="Emphasis">
good idea</EM>
 to use ACLs, and to control access to your server. Limiting access to your server by outside parties can help prevent spoofing and DoS attacks against your server.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997356">
 </A>
Here is an example of how to properly apply ACLs:</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997357">
 </A>
// Set up an ACL named &quot;bogusnets&quot; that will block RFC1918 space,<BR>
// which is commonly used in spoofing attacks.</P>
<PRE CLASS="2Level-fixed1"><A NAME="pgfId=997358"> </A>
acl bogusnets { 0.0.0.0/8; 1.0.0.0/8; 2.0.0.0/8; 192.0.2.0/24; 224.0.0.0/3; 10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16; };</PRE>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997359">
 </A>
// Set up an ACL called our-nets.  Replace this with the real IP numbers.</P>
<PRE CLASS="2Level-fixed1"><A NAME="pgfId=997360"> </A>
acl our-nets { x.x.x.x/24; x.x.x.x/21; }; </PRE>
<PRE CLASS="2Level-fixed1"><A NAME="pgfId=997361"> </A>
options {
  ...
  ...
  allow-query { our-nets; };
  allow-recursion { our-nets; };
  ...
  blackhole { bogusnets; };
  ...
};</PRE>
<PRE CLASS="2Level-fixed1"><A NAME="pgfId=997362"> </A>
zone &quot;example.com&quot; {
  type master;
  file &quot;m/example.com&quot;;
  allow-query { any; };
};</PRE>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997363">
 </A>
This allows recursive queries of the server from the outside unless recursion has been previously disabled.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997364">
 </A>
For more information on how to use ACLs to protect your server, see the <EM CLASS="Emphasis">
AUSCERT</EM>
 advisory at<BR>
<EM CLASS="Emphasis">
ftp://ftp.auscert.org.au/pub/auscert/advisory/AL-1999.004.dns_dos</EM>
</P>
</DIV>
<DIV>
<OL>
<H3 CLASS="2Level">
<A NAME="pgfId=997365">
 </A>
6.2	<CODE CLASS="Program-Process">
chroot</CODE>
 and <CODE CLASS="Program-Process">
set_uid</CODE>
 (for UNIX servers)</H3>
</OL>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997366">
 </A>
On UNIX servers, it is possible to run BIND in a <EM CLASS="Emphasis">
chrooted</EM>
 environment (<CODE CLASS="Program-Process">
chroot()</CODE>
) by specifying the &quot;<CODE CLASS="Program-Process">
-t</CODE>
&quot; option. This can help improve system security by placing BIND in a &quot;sandbox,&quot; which will limit the damage done if a server is compromised.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997367">
 </A>
Another useful feature in the UNIX version of BIND is the ability to run the daemon as a nonprivileged user ( -u &lt;user&gt; ) and in a nonprivileged group ( -g &lt;group&gt; ). We suggest running as a nonpriveleged user when using the <CODE CLASS="Program-Process">
chroot</CODE>
 feature.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997368">
 </A>
Here is an example command line to load BIND in a <CODE CLASS="Program-Process">
chroot()</CODE>
 sandbox, <BR>
<CODE CLASS="Program-Process">
/var/named</CODE>
, and to run <CODE CLASS="Program-Process">
named</CODE>
 <CODE CLASS="Program-Process">
set_uid</CODE>
 and <CODE CLASS="Program-Process">
set_gid</CODE>
 it to user 202 and group 202:</P>
<PRE CLASS="2Level-fixed1"><A NAME="pgfId=997369"> </A>
/usr/local/bin/named -u 202 -g 202 -t /var/named</PRE>
<DIV>
<OL>
<H4 CLASS="3Level">
<A NAME="pgfId=997370">
 </A>
6.2.1	The <CODE CLASS="Program-Process">
chroot</CODE>
 environment</H4>
</OL>
<P CLASS="3LevelContinued">
<A NAME="pgfId=997371">
 </A>
In order for a <CODE CLASS="Program-Process">
chroot()</CODE>
 environment to work properly in a particular directory (e.g. var/named), you will need to set up an environment that includes everything BIND needs to run. From BIND's point of view, /var/named is the root of the filesystem. You will need <CODE CLASS="Program-Process">
/dev/null</CODE>
, and any library directories and files that BIND needs to run on your system.  Please consult your operating system's instructions if you need help figuring out which library files you need to copy over to the <CODE CLASS="Program-Process">
chroot()</CODE>
 sandbox.</P>
<P CLASS="3LevelContinued">
<A NAME="pgfId=997372">
 </A>
If you are running an operating system that supports static binaries, you can also compile BIND staticly and avoid the need to copy system libraries over to your <CODE CLASS="Program-Process">
chroot()</CODE>
 sandbox.</P>
</DIV>
<DIV>
<OL>
<H4 CLASS="3Level">
<A NAME="pgfId=997373">
 </A>
6.2.2	Using <CODE CLASS="Program-Process">
set_uid</CODE>
/<CODE CLASS="Program-Process">
set_gid</CODE>
</H4>
</OL>
<P CLASS="3LevelContinued">
<A NAME="pgfId=997374">
 </A>
Prior to running the <CODE CLASS="Program-Process">
named</CODE>
 daemon, use the <CODE CLASS="Program-Process">
touch</CODE>
 utility (to change file access and modification times) or the <CODE CLASS="Program-Process">
chown</CODE>
 utility (to set the user id and/or group id) on files to which you want BIND to write.</P>
</DIV>
</DIV>
<DIV>
<OL>
<H3 CLASS="2Level">
<A NAME="pgfId=997375">
 </A>
6.3	Dynamic updates</H3>
</OL>
<P CLASS="2LevelContinued">
<A NAME="pgfId=997376">
 </A>
Since dynamic updates do not have per-RR security, access to the dynamic update facility should be strictly limited. The traditional way to do this has been host-based, but BINDv9 allows tranaction signature (TSIG) signed updates to cryptographically verify the updates.</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=1002128">
 </A>
<EM CLASS="Emphasis">
 (Note: The syntax for this not finalized.)</EM>
</P>
<P CLASS="2LevelContinued">
<A NAME="pgfId=1002129">
 </A>
See also <A HREF="BV9ARM.4.html#19780" CLASS="XRef">
Incremental Transfer (IXFR)</A>
.</P>
<P CLASS="Body">
<A NAME="pgfId=997347">
 </A>
&nbsp;</P>
<p>Return to <A href="BV9ARM.HTML">BINDv9 Administrator Reference Manual</A> table of contents.</p>
</DIV>
</BODY>
</HTML>
